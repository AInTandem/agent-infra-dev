# MCP Server Configuration
# 定義可用的 Model Context Protocol Servers

# Transport Types:
# - stdio: Standard input/output (default, for local MCP servers)
# - sse: Server-Sent Events (for remote/streaming MCP servers)

mcp_servers:
  # 檔案系統存取 (Stdio Transport - Default)
  - name: "filesystem"
    description: "檔案系統讀寫存取"
    transport: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-filesystem"
      - "${AGENT_ROOT_PATH}"  # 通過 .env 設定 AGENT_ROOT_PATH 環境變數
    env: {}
    timeout: 30
    enabled: true
    # 健康檢查設定
    health_check:
      enabled: true
      interval: 60  # 每 60 秒檢查一次

  # Brave 搜尋 (Stdio Transport)
  - name: "web-search"
    description: "網路搜尋功能（使用 Brave Search API）"
    transport: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-brave-search"
    env:
      BRAVE_API_KEY: "${BRAVE_API_KEY}"
    timeout: 30
    enabled: false
    health_check:
      enabled: true
      interval: 60

  # OpenWebSearch - 免費多引擎網路搜尋（無需 API Key）
  - name: "open-websearch"
    description: "免費多引擎網路搜尋（Bing, Baidu, DuckDuckGo, Brave 等）"
    transport: "stdio"
    command: "npx"
    args:
      - "-y"
      - "open-websearch@1.1.5"
    env:
      DEFAULT_SEARCH_ENGINE: "brave"
    timeout: 30
    enabled: false
    health_check:
      enabled: true
      interval: 60

  # GitHub 整合 (Stdio Transport)
  - name: "github"
    description: "GitHub 操作（Repositories, Issues, Pull Requests）"
    transport: "stdio"
    command: "uvx"
    args:
      - "mcp-server-github"
    env:
      GITHUB_TOKEN: "${GITHUB_TOKEN}"
    timeout: 30
    enabled: false  # 需要配置 GITHUB_TOKEN 後啟用
    health_check:
      enabled: true
      interval: 60

  # PostgreSQL 資料庫 (Stdio Transport)
  - name: "postgres"
    description: "PostgreSQL 資料庫操作"
    transport: "stdio"
    command: "uvx"
    args:
      - "mcp-server-postgres"
      - "--connection-string"
      - "${DATABASE_URL}"  # postgresql://user:password@host:port/database
    env: {}
    timeout: 30
    enabled: false  # 需要配置 DATABASE_URL 後啟用
    health_check:
      enabled: true
      interval: 60

  # Google Maps (Stdio Transport)
  - name: "google-maps"
    description: "Google Maps 地理資訊服務"
    transport: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-google-maps"
    env:
      GOOGLE_MAPS_API_KEY: "${GOOGLE_MAPS_API_KEY}"
    timeout: 30
    enabled: false
    health_check:
      enabled: true
      interval: 60

  # ============================================================================
  # Puppeteer 網頁自動化
  # ============================================================================
  # 重要：Claude SDK 的 Computer Use 功能需要此伺服器
  #
  # 當 Agent 配置中設定了 computer_use_enabled: true 時，
  # 必須同時配置 puppeteer MCP 伺服器
  #
  # 範例 Agent 配置：
  #   - name: "browser_agent"
  #     llm_model: "claude-3-5-sonnet-20241022"
  #     sdk: "claude"
  #     computer_use_enabled: true
  #     mcp_servers:
  #       - "filesystem"
  #       - "puppeteer"  # 必須包含此伺服器
  # ============================================================================
  - name: "puppeteer"
    description: "網頁自動化與抓取（Claude Computer Use 必需）"
    transport: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-puppeteer"
    env: {}
    timeout: 60
    enabled: false
    health_check:
      enabled: false  # Puppeteer 啟動較慢，可以停用健康檢查

  # ========================================
  # SSE Transport Examples (串流傳輸範例)
  # ========================================

  # 遠端 SSE MCP Server 範例
  # - name: "remote-mcp-server"
  #   description: "遠端 MCP 伺服器（支援串流回應）"
  #   transport: "sse"
  #   sse:
  #     url: "https://example.com/mcp/sse"
  #     headers:
  #       Authorization: "Bearer ${MCP_SERVER_TOKEN}"
  #   timeout: 30
  #   enabled: false
  #   health_check:
  #     enabled: true
  #     interval: 60

  # 本地 SSE MCP Server 範例（如果你的本地 MCP server 支援 SSE）
  # - name: "local-sse-server"
  #   description: "本地 SSE MCP 伺服器"
  #   transport: "sse"
  #   sse:
  #     url: "http://localhost:3000/sse"
  #     headers: {}
  #   timeout: 30
  #   enabled: false
  #   health_check:
  #     enabled: true
  #     interval: 30

# ============================================================================
# Dual SDK Architecture - MCP Server 配置建議
# ============================================================================
#
# Qwen SDK Agents (推薦配置):
#   - filesystem: 檔案系統操作
#   - web-search: 網路搜尋
#   - github: GitHub 整合
#   - postgres: 資料庫操作
#   - google-maps: 地理資訊
#
# Claude SDK Agents (推薦配置):
#   - filesystem: 檔案系統操作
#   - puppeteer: **Computer Use 必需**
#
# Computer Use 需求:
#   當 Agent 配置 computer_use_enabled: true 時，
#   必須在 mcp_servers 中包含 "puppeteer" 伺服器
#
# 詳見: docs/DUAL_SDK_ARCHITECTURE.md
#       docs/MCP_SERVER_CONFIGURATION.md
